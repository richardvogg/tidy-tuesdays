image_threshold(threshold = "20%",type="white") %>%
image_median(radius=2) %>%
image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("20%",type="white") %>% plot()
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_threshold(threshold = "20%",type="white") %>%
image_median(radius=2) %>%
image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("20%",type="white") %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_threshold(threshold = "20%",type="white") %>%
image_median(radius=2) %>%
image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("20%",type="white") %>%
image_median(radius=3) %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_threshold(threshold = "20%",type="white") %>%
image_median(radius=2) %>%
image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("20%",type="white") %>%
image_median(radius=2) %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_threshold(threshold = "20%",type="white") %>%
image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("20%",type="white") %>% plot()
edge <- matrix(c(1,1,1, 1,-4,1, 1,1,1), 3, 3)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>% plot()
edge <- matrix(c(1,1,1, 1,-10,1, 1,1,1), 3, 3)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>% plot()
edge <- matrix(c(1,1,1, 1,-4,1, 1,1,1), 3, 3)
edge <- matrix(c(1,1,1, 1,-10,1, 1,1,1), 3, 3)
edge <- matrix(c(0,1,0, 1,-4,1, 0,1,0), 3, 3)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>% plot()
edge <- matrix(c(0,1,0, 1,-10,1, 0,1,0), 3, 3)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>% plot()
edge <- matrix(c(0,2,0, 2,-4,2, 0,2,0), 3, 3)
sharpen  = matrix(c(0,-1,0, -1,4,-1, 0,-1,0),3, 3)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>% plot()
edge <- matrix(c(0,1,0, 1,-4,1, 0,1,0), 3, 3)
sharpen  = matrix(c(0,-1,0, -1,4,-1, 0,-1,0),3, 3)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>% plot()
sharpen  = matrix(c(0,-1,0, -1,8,-1, 0,-1,0),3, 3)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_threshold(threshold = "20%",type="white") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>% plot()
image_scale("100x100!") %>%
image_threshold("20%",type="white") %>%
image_median(radius=2) %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("20%",type="white") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("50%",type="white") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("50%",type="white") %>%
image_trheshold("50%",type="black") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("50%",type="white") %>%
image_threshold("50%",type="black") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("50%",type="white") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>% plot()
image_threshold("70%",type="black") %>% plot()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("70%",type="black") %>% plot()
image_median(radius=2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
#image_threshold(threshold = "20%",type="white") %>% plot()
#image_threshold("100%",type="black") %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("70%",type="black") %>%
image_median(radius=2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("70%",type="black") %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
?image_median
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("70%",type="black") %>%
image_median() %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("70%",type="black") %>%
image_median(2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("70%",type="black") %>%
image_median(2) %>%
image_median(2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews %>% blog()
mews %>% plot()
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("100%",type="black") %>%
image_median(2) %>%
image_median(2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("30%",type="white") %>%
image_threshold("100%",type="black") %>%
image_median(2) %>%
image_median(2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews_borders %>%
filter(value==255) %>% nrow()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("40%",type="white") %>%
image_threshold("100%",type="black") %>%
image_median(2) %>%
image_median(2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>% nrow()
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews_borders <- mews %>%
image_quantize(colorspace="gray") %>%
image_convolve(edge) %>%
image_convolve(sharpen) %>%
image_crop("140x140+60+25") %>%
image_scale("100x100!") %>%
image_threshold("35%",type="white") %>%
image_threshold("100%",type="black") %>%
image_median(2) %>%
image_median(2) %>%
image_data() %>%
as.integer() %>%
{.[,,1]} %>%
as.data.frame() %>%
mutate(y=row_number()) %>%
pivot_longer(-y,names_to="x") %>%
mutate(x=parse_number(x),
y=120-y)
mews_borders %>%
filter(value==255) %>%
ggplot(aes(x,y))+geom_point()
mews <- mews_borders %>%
filter(value==255) %>%
select(x,y)
library(metamer)
dino <- datasaurus %>% filter(dataset=="dino") %>% select(x,y)
final_mews <- draw_data(mews) %>% select(x,y)
plot(final_mews)
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
perturbation=0.08,
N=10000,trim=500)
metamer[[500]]
plot(metamer[[500]])
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
perturbation=0.08,
N=50000,trim=1000)
plot(metamer[[1000]])
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
N=50000,trim=1000)
metamer[[1000]]
plot(metamer[[1000]])
plot(dino)
plot(metamer[[1000]])
plot(mews)
plot(mews[sample(1:1311,142),])
plot(metamer[[1000]])
mean(metamer[[1000]]$x)
mean(dino$x)
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
N=100000,trim=5000)
plot(metamer[[5000]])
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
N=5000,trim=5000)
metamer[[5000]]
metamer[[1499]]
metamer[[1500]]
plot(metamer[[1499]])
plot(metamer[[1000]])
plot(metamer[[200]])
?metamerize
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
N=100000,trim=5,annealing=FALSE)
plot(metamer[[5]])
plot(metamer[[4]])
plot(metamer[[3]])
plot(metamer[[2]])
plot(metamer[[1]])
plot(metamer[[5]])
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
N=100000,trim=10000)
plot(metamer[[10000]])
library(gganimate)
metamer %>%
as.data.frame() %>%
ggplot(aes(x, y)) +
geom_point() +
transition_manual(.metamer)
datasaurus %>%
filter(dataset=="dino") %>%
ggplot(aes(x=x,y=y))+geom_point(aes(col=dataset))
datasaurus %>%
filter(dataset=="dino") %>%
ggplot(aes(x=x,y=y))+geom_point()
metamer[[10000]] %>%
ggplot(aes(x,y))+geom_point()
metamer[[9000]] %>%
ggplot(aes(x,y))+geom_point()
metamer[[9000]] %>%
ggplot(aes(x,y))+geom_point()+
labs(subtitle=cor(x,y))
metamer[[10000]] %>%
rbind(metamer[[9999]]) %>%
ggplot(aes(x,y))+geom_point()+
labs(subtitle=cor(x,y))
metamer[[10000]] %>%
rbind(metamer[[9999]]) %>% View()
metamer[[10000]] %>%
rbind(metamer[[9999]]) %>%
ggplot(aes(x,y))+geom_point()+
labs(subtitle=cor(x,y))
metamer[[10000]] %>%
rbind(metamer[[9999]]) %>%
ggplot(aes(x,y))+geom_point()
#This function uses simulated annealing to move points from the dino constellation
#towards mews, preserving mean, sd and cor.
metamer <- metamerize(data=dino,
preserve = delayed_with(mean(x), sd(x), mean(y), sd(y), cor(x, y)),
minimize = mean_dist_to(mews),
N=500000,trim=10000)
plot(metamer[[10000]])
mean(metamer[[10000]]$x)
mean(dino$x)
mean(metamer[[10000]]$y)
mean(dino$y)
sd(metamer[[10000]]$x)
sd(dino$x)
sd(metamer[[10000]]$y)
sd(dino$y)
cor(metamer[[10000]]$x,metamer[[10000]]$y)
cor(dino$x,dino$y)
metamer[[10000]] %>%
ggplot(aes(x,y))+geom_point()
